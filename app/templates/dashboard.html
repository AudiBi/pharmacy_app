{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2>Tableau de bord</h2>
    <div class="row mt-4">
        <div class="col-md-4">
            <div class="card text-white bg-primary mb-3">
                <div class="card-header">Médicaments</div>
                <div class="card-body">
                    <h5 class="card-title">{{ total_drugs }}</h5>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-secondary mb-3">
                <div class="card-header">Fournisseurs</div>
                <div class="card-body">
                    <h5 class="card-title">{{ total_suppliers }}</h5>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-success mb-3">
                <div class="card-header">Ventes enregistrées</div>
                <div class="card-body">
                    <h5 class="card-title">{{ total_sales }}</h5>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}


<!-- {% extends 'base.html' %}
{% block content %}
<h1>Tableau de bord</h1>
<div class="row">
    <div class="col-md-4">
        <div class="card text-white bg-primary mb-3">
            <div class="card-body">
                <h5 class="card-title">Médicaments</h5>
                <p class="card-text">{{ total_drugs }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-white bg-success mb-3">
            <div class="card-body">
                <h5 class="card-title">Total Ventes</h5>
                <p class="card-text">{{ total_sales }}</p>
            </div>
        </div>
    </div>
</div>
<h3>Statistiques des ventes</h3>
<canvas id="salesChart" width="400" height="200"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
fetch("/api/sales/chart-data")
  .then(res => res.json())
  .then(data => {
    new Chart(document.getElementById('salesChart').getContext('2d'), {
      type: 'bar',
      data: {
        labels: data.labels,
        datasets: [{
          label: 'Quantité vendue',
          data: data.values,
          backgroundColor: 'rgba(75, 192, 192, 0.6)'
        }]
      }
    });
});
</script>
{% endblock %} -->
